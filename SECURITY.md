# Security Guidelines - GoalFlow

## üîí –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è NextAuth.js —Å JWT-based sessions
- ‚úÖ –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcrypt (12 —Ä–∞—É–Ω–¥–æ–≤)
- ‚úÖ –í—Å–µ API endpoints –∑–∞—â–∏—â–µ–Ω—ã middleware
- ‚úÖ Workspace access control –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–æ–≤

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ –í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Zod schemas
- ‚úÖ SQL injection –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ Prisma ORM (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- ‚úÖ XSS –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ sanitization —É—Ç–∏–ª–∏—Ç

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Prisma ORM –¥–ª—è type-safe queries
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç SQL injection
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª—è—Ö –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ Cascade delete –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 4. API Security

- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ Rate limiting —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production
- ‚úÖ Input validation –Ω–∞ –≤—Å–µ—Ö endpoints
- ‚úÖ Error messages –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

### 5. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- ‚úÖ –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ .env
- ‚úÖ .env —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore
- ‚úÖ NEXTAUTH_SECRET –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∏–ª—å–Ω—ã–º —Å–ª—É—á–∞–π–Ω—ã–º –∫–ª—é—á–æ–º

## üõ°Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Production

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã:

1. **HTTPS —Ç–æ–ª—å–∫–æ**
   - –í—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–µ—Ä–µ–∑ HTTPS
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HSTS headers

2. **Rate Limiting**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å rate limiting –¥–ª—è API endpoints
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Ç–∏–ø–∞ `@upstash/ratelimit`

3. **CSP Headers**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Content Security Policy
   - –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ —Å—Ç–∏–ª–µ–π

4. **Security Headers**
   ```typescript
   // next.config.js
   headers: async () => [
     {
       source: '/:path*',
       headers: [
         { key: 'X-DNS-Prefetch-Control', value: 'on' },
         { key: 'Strict-Transport-Security', value: 'max-age=63072000' },
         { key: 'X-Frame-Options', value: 'SAMEORIGIN' },
         { key: 'X-Content-Type-Options', value: 'nosniff' },
         { key: 'X-XSS-Protection', value: '1; mode=block' },
         { key: 'Referrer-Policy', value: 'strict-origin-when-cross-origin' },
       ],
     },
   ],
   ```

5. **Database Security**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å connection pooling
   - –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ë–î –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã

6. **Error Handling**
   - –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å stack traces –≤ production
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Sentry –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üîç Security Audit Checklist

- [ ] –í—Å–µ –ø–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- [ ] JWT tokens –∏–º–µ—é—Ç expiration time
- [ ] SQL injection –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ Prisma
- [ ] XSS –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ sanitization
- [ ] CSRF –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ NextAuth.js
- [ ] Rate limiting –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö endpoints
- [ ] HTTPS enforced –≤ production
- [ ] Security headers –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Environment variables –Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è
- [ ] Dependencies —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- [ ] Error messages –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

## üìù Reporting Security Issues

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. –ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π issue
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ email –Ω–∞ security@yourdomain.com
3. –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –¥–µ—Ç–∞–ª—å–Ω–æ
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 11.11.2025

