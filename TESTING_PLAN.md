# План тестирования GoalFlow

## 1. Обзор существующих автоматических тестов

### Unit тесты (Vitest)

- `tests/unit/goalService.test.ts` - тестирование CRUD операций с целями
- `tests/unit/goalHierarchy.test.ts` - тестирование иерархии целей
- `tests/unit/metricService.test.ts` - тестирование метрик
- `tests/unit/emailService.test.ts` - тестирование email уведомлений
- `tests/unit/notificationService.test.ts` - тестирование системы уведомлений
- `tests/unit/telegramService.test.ts` - тестирование Telegram интеграции
- `tests/unit/telegramCommands.test.ts` - тестирование команд бота

### Integration тесты

- `tests/integration/goals-flow.test.ts` - тестирование полного flow создания/обновления/завершения целей
- `tests/integration/workspace-flow.test.ts` - тестирование создания workspace и управления участниками

### E2E тесты (Playwright)

- `tests/e2e/auth-flow.spec.ts` - тестирование регистрации и входа
- `tests/e2e/goals-flow.spec.ts` - тестирование создания и просмотра целей

**Запуск автоматических тестов:**

```bash
npm run test:run      # Unit и Integration тесты
npm run test:e2e      # E2E тесты
```

---

## 2. Подготовка к ручному тестированию

### 2.1 Настройка окружения

1. Убедитесь, что PostgreSQL запущен
2. Создайте файл `.env` с необходимыми переменными:
   ```env
   DATABASE_URL="postgresql://user:password@localhost:5432/goalflow"
   NEXTAUTH_URL="http://localhost:3000"
   NEXTAUTH_SECRET="your-secret-key"
   ```
3. Выполните миграции:
   ```bash
   npx prisma migrate dev
   npx prisma generate
   ```
4. (Опционально) Заполните тестовыми данными:
   ```bash
   npm run db:seed
   ```
5. Запустите dev server:
   ```bash
   npm run dev
   ```

### 2.2 Тестовые данные

Рекомендуется создать минимум:

- 2-3 пользователя (разные роли)
- 2-3 workspace
- 10-15 целей (разных типов и статусов)
- Несколько метрик для целей
- Иерархию целей (parent-child)

---

## 3. План ручного тестирования по функциональности

### 3.1 Аутентификация и авторизация

#### TC-AUTH-001: Регистрация нового пользователя

**Шаги:**

1. Откройте `http://localhost:3000/register`
2. Заполните форму:
   - Name: "Test User"
   - Email: "test@example.com"
   - Password: "password123"
3. Нажмите "Register"
4. Проверьте редирект на `/dashboard`

**Ожидаемый результат:**

- Пользователь успешно зарегистрирован
- Редирект на dashboard
- Сессия создана

**Проверка в БД:**

```sql
SELECT * FROM "User" WHERE email = 'test@example.com';
```

#### TC-AUTH-002: Вход существующего пользователя

**Шаги:**

1. Откройте `http://localhost:3000/login`
2. Введите email и password
3. Нажмите "Sign In"

**Ожидаемый результат:**

- Успешный вход
- Редирект на dashboard
- Сессия активна

#### TC-AUTH-003: Вход с неверными данными

**Шаги:**

1. Откройте `/login`
2. Введите неверный email или password
3. Нажмите "Sign In"

**Ожидаемый результат:**

- Отображается сообщение об ошибке
- Пользователь остается на странице login
- Сессия не создана

#### TC-AUTH-004: Защита роутов

**Шаги:**

1. Выйдите из системы (если залогинены)
2. Попробуйте открыть `/dashboard`, `/goals`, `/analytics`

**Ожидаемый результат:**

- Редирект на `/login`
- Доступ к защищенным страницам запрещен

---

### 3.2 Управление Workspace

#### TC-WS-001: Создание workspace

**Шаги:**

1. Войдите в систему
2. На dashboard найдите "Workspace Selector"
3. Нажмите "Create Workspace" или "+"
4. Заполните форму:
   - Name: "Test Workspace"
   - Description: "Test Description"
5. Нажмите "Create"

**Ожидаемый результат:**

- Workspace создан
- Вы автоматически становитесь OWNER
- Workspace отображается в списке

**Проверка в БД:**

```sql
SELECT w.*, wu.role FROM "Workspace" w
JOIN "WorkspaceUser" wu ON w.id = wu."workspaceId"
WHERE w.name = 'Test Workspace';
```

#### TC-WS-002: Просмотр списка workspace

**Шаги:**

1. Откройте dashboard
2. Проверьте Workspace Selector

**Ожидаемый результат:**

- Отображаются все workspace, где вы участник
- Можно переключаться между workspace

#### TC-WS-003: Редактирование workspace

**Шаги:**

1. Откройте workspace (страница `/workspaces/[id]`)
2. Нажмите "Edit"
3. Измените name и description
4. Сохраните изменения

**Ожидаемый результат:**

- Изменения сохранены
- Обновленная информация отображается

**Ограничения:**

- Только OWNER может редактировать

#### TC-WS-004: Удаление workspace

**Шаги:**

1. Откройте workspace
2. Нажмите "Delete"
3. Подтвердите удаление

**Ожидаемый результат:**

- Workspace удален
- Редирект на dashboard
- Все связанные данные удалены (каскадно)

**Ограничения:**

- Только OWNER может удалить workspace

---

### 3.3 Управление участниками Workspace

#### TC-MEM-001: Добавление участника

**Шаги:**

1. Откройте workspace settings (`/workspaces/[id]/settings`)
2. В разделе "Workspace Members" нажмите "Invite Member"
3. Заполните форму:
   - Email: "member@example.com"
   - Role: "MEMBER"
4. Нажмите "Send Invitation"

**Ожидаемый результат:**

- Приглашение отправлено (если настроен email)
- Участник появляется в списке с статусом "PENDING"
- Email уведомление отправлено (если настроен RESEND_API_KEY)

**Ограничения:**

- Только ADMIN и OWNER могут приглашать

#### TC-MEM-002: Принятие приглашения

**Шаги:**

1. Войдите как пользователь с email из приглашения
2. Откройте ссылку из email или `/invite/[token]`
3. Нажмите "Accept"

**Ожидаемый результат:**

- Пользователь добавлен в workspace
- Статус приглашения изменен на "ACCEPTED"
- Пользователь видит workspace в списке

#### TC-MEM-003: Изменение роли участника

**Шаги:**

1. Откройте workspace settings
2. Найдите участника в списке
3. Измените роль (если доступно)

**Ожидаемый результат:**

- Роль обновлена
- Изменения отображаются в списке

**Ограничения:**

- Только ADMIN может изменять роли
- OWNER не может изменить свою роль

#### TC-MEM-004: Удаление участника

**Шаги:**

1. Откройте workspace settings
2. Найдите участника
3. Нажмите "Remove" или иконку удаления
4. Подтвердите удаление

**Ожидаемый результат:**

- Участник удален из workspace
- Больше не имеет доступа к workspace

**Ограничения:**

- OWNER не может быть удален
- Только ADMIN может удалять участников

---

### 3.4 Управление целями (Goals)

#### TC-GOAL-001: Создание цели

**Шаги:**

1. Выберите workspace
2. Перейдите в `/goals`
3. Нажмите "Create Goal"
4. Заполните форму:
   - Title: "Test Goal"
   - Description: "Test Description"
   - Type: "QUARTERLY"
   - Start Date: сегодня
   - End Date: через 3 месяца
5. Нажмите "Create"

**Ожидаемый результат:**

- Цель создана
- Статус: "DRAFT"
- Прогресс: 0%
- Отображается в списке целей

**Проверка в БД:**

```sql
SELECT * FROM "Goal" WHERE title = 'Test Goal';
```

#### TC-GOAL-002: Редактирование цели

**Шаги:**

1. Откройте цель из списка
2. Нажмите "Edit"
3. Измените title, description, progress
4. Сохраните изменения

**Ожидаемый результат:**

- Изменения сохранены
- Обновленная информация отображается
- Activity log создан (если настроен)

#### TC-GOAL-003: Изменение статуса цели

**Шаги:**

1. Откройте цель
2. Измените статус (DRAFT → ACTIVE → REVIEW → COMPLETED)
3. Проверьте каждое изменение

**Ожидаемый результат:**

- Статус обновляется
- При переходе в COMPLETED прогресс автоматически становится 100%
- Уведомления отправлены (если настроены)

#### TC-GOAL-004: Удаление цели

**Шаги:**

1. Откройте цель
2. Нажмите "Delete"
3. Подтвердите удаление

**Ожидаемый результат:**

- Цель удалена
- Редирект на список целей
- Activity log создан

#### TC-GOAL-005: Поиск целей

**Шаги:**

1. Перейдите в `/goals`
2. Откройте вкладку "Поиск"
3. Введите поисковый запрос (например, часть title)
4. Проверьте результаты

**Ожидаемый результат:**

- Отображаются цели, соответствующие запросу
- Поиск работает по title и description
- Результаты обновляются с debounce (500ms)

---

### 3.5 Иерархия целей

#### TC-HIER-001: Создание подцели

**Шаги:**

1. Создайте родительскую цель (тип QUARTERLY или MONTHLY)
2. Откройте цель
3. Найдите опцию создания подцели
4. Создайте подцель

**Ожидаемый результат:**

- Подцель создана
- Связь parent-child установлена
- Отображается в иерархии

**Ограничения:**

- WEEKLY цели не могут иметь детей
- Нельзя создать циклическую зависимость

#### TC-HIER-002: Просмотр иерархии

**Шаги:**

1. Перейдите в `/goals`
2. Откройте вкладку "Иерархия"
3. Проверьте отображение дерева целей

**Ожидаемый результат:**

- Иерархия отображается в виде дерева
- Видны связи parent-child
- Можно раскрывать/сворачивать узлы

#### TC-HIER-003: Progress roll-up

**Шаги:**

1. Создайте родительскую цель с несколькими подцелями
2. Измените прогресс подцелей (например, 50%, 75%, 100%)
3. Проверьте прогресс родительской цели

**Ожидаемый результат:**

- Прогресс родителя автоматически обновляется
- Рассчитывается как среднее значение прогресса детей
- Обновление происходит автоматически

#### TC-HIER-004: Валидация иерархии

**Шаги:**

1. Попробуйте создать WEEKLY цель с подцелью
2. Попробуйте установить цель как родителя самой себе

**Ожидаемый результат:**

- Ошибка валидации
- Операция отклонена
- Сообщение об ошибке отображается

---

### 3.6 Метрики (Metrics)

#### TC-MET-001: Добавление метрики к цели

**Шаги:**

1. Откройте цель
2. Найдите раздел "Metrics"
3. Нажмите "Add Metric"
4. Заполните форму:
   - Name: "Revenue"
   - Current Value: 0
   - Target Value: 10000
   - Unit: "USD"
5. Сохраните

**Ожидаемый результат:**

- Метрика добавлена
- Отображается в списке метрик цели
- Можно отслеживать прогресс

#### TC-MET-002: Обновление метрики

**Шаги:**

1. Откройте метрику
2. Измените Current Value
3. Сохраните изменения

**Ожидаемый результат:**

- Значение обновлено
- Изменения сохранены

#### TC-MET-003: Удаление метрики

**Шаги:**

1. Откройте метрику
2. Нажмите "Delete"
3. Подтвердите удаление

**Ожидаемый результат:**

- Метрика удалена
- Больше не отображается в списке

---

### 3.7 Шаблоны целей (Goal Templates)

#### TC-TMPL-001: Создание шаблона

**Шаги:**

1. Перейдите в раздел шаблонов (если есть UI) или используйте API
2. Создайте шаблон:
   - Name: "Quarterly Sales Template"
   - Type: "QUARTERLY"
   - Title: "Increase Sales"
   - Description: "Template for quarterly sales goals"

**Ожидаемый результат:**

- Шаблон создан
- Доступен для использования

#### TC-TMPL-002: Создание цели из шаблона

**Шаги:**

1. Выберите шаблон
2. Нажмите "Create Goal from Template"
3. Выберите workspace
4. Подтвердите создание

**Ожидаемый результат:**

- Цель создана с данными из шаблона
- Даты автоматически рассчитаны на основе типа
- Все поля заполнены из шаблона

---

### 3.8 Массовые операции (Bulk Operations)

#### TC-BULK-001: Массовое обновление статуса

**Шаги:**

1. Выберите несколько целей (через чекбоксы, если есть UI)
2. Выберите действие "Bulk Update"
3. Измените статус на "ACTIVE"
4. Примените изменения

**Ожидаемый результат:**

- Все выбранные цели обновлены
- Статус изменен для всех
- Activity log создан для каждой цели

**Примечание:** UI для массовых операций может быть не реализован. Используйте API endpoint `/api/goals/bulk` для тестирования.

#### TC-BULK-002: Массовое удаление

**Шаги:**

1. Выберите несколько целей
2. Выберите действие "Delete"
3. Подтвердите удаление

**Ожидаемый результат:**

- Все выбранные цели удалены
- Операция выполнена в транзакции

**Примечание:** Используйте API endpoint `/api/goals/bulk` с методом DELETE для тестирования.

---

### 3.9 Аналитика и отчеты

#### TC-ANAL-001: Просмотр аналитики

**Шаги:**

1. Перейдите в `/analytics`
2. Выберите workspace
3. Проверьте отображение графиков:
   - Completion Rate Chart
   - Type Distribution Chart
   - Progress Trend Chart

**Ожидаемый результат:**

- Графики отображаются корректно
- Данные соответствуют реальным целям
- Фильтры работают (даты, типы)

#### TC-ANAL-002: Team Performance Metrics

**Шаги:**

1. В `/analytics` перейдите на вкладку "Team Performance"
2. Проверьте метрики команды

**Ожидаемый результат:**

- Отображаются метрики всех участников workspace
- Видны: total goals, completed goals, average progress, on-time rate
- Графики отображают данные по каждому участнику

#### TC-ANAL-003: Custom Report Builder

**Шаги:**

1. Перейдите в `/reports`
2. Выберите workspace
3. Настройте фильтры:
   - Date range
   - Status filter
   - Type filter
   - Group by: "user"
4. Включите "Include Metrics"
5. Нажмите "Generate Report"

**Ожидаемый результат:**

- Отчет сгенерирован
- Отображаются summary данные
- Список целей с фильтрами
- Группированные данные (если выбрано)
- Метрики включены (если выбрано)

---

### 3.10 Уведомления

#### TC-NOTIF-001: Настройка предпочтений уведомлений

**Шаги:**

1. Перейдите в Settings (если есть UI) или используйте API `/api/notifications/preferences`
2. Настройте предпочтения:
   - Email enabled: true
   - Telegram enabled: true
   - Status change notifications: true
   - Progress update notifications: true
   - Deadline reminder days: [7, 3, 1]

**Ожидаемый результат:**

- Предпочтения сохранены
- Применяются при отправке уведомлений

**API пример:**

```bash
curl -X PATCH http://localhost:3000/api/notifications/preferences \
  -H "Content-Type: application/json" \
  -d '{
    "emailEnabled": true,
    "telegramEnabled": true,
    "statusChangeEmail": true,
    "progressUpdateEmail": true,
    "deadlineReminderDays": [7, 3, 1]
  }'
```

#### TC-NOTIF-002: Уведомление об изменении статуса

**Шаги:**

1. Настройте уведомления (email или Telegram)
2. Измените статус цели
3. Проверьте получение уведомления

**Ожидаемый результат:**

- Email отправлен (если настроен RESEND_API_KEY)
- Telegram сообщение отправлено (если настроен TELEGRAM_BOT_TOKEN и аккаунт привязан)
- Уведомление содержит информацию о старом и новом статусе

#### TC-NOTIF-003: Уведомление об обновлении прогресса

**Шаги:**

1. Обновите прогресс цели (например, с 50% до 75%)
2. Проверьте уведомление

**Ожидаемый результат:**

- Уведомление отправлено
- Содержит информацию о новом прогрессе

---

### 3.11 Telegram интеграция

#### TC-TG-001: Привязка Telegram аккаунта

**Шаги:**

1. Перейдите в `/settings/telegram`
2. Нажмите "Link Telegram Account"
3. Следуйте инструкциям
4. Отправьте команду `/link [token]` боту

**Ожидаемый результат:**

- Telegram аккаунт привязан
- Telegram ID сохранен в профиле пользователя
- Можно получать уведомления в Telegram

#### TC-TG-002: Команды бота

**Шаги:**

1. Откройте Telegram бота
2. Проверьте команды:
   - `/start` - приветствие
   - `/help` - список команд
   - `/goals` - список целей
   - `/report` - отчет по целям
   - `/link [token]` - привязка аккаунта

**Ожидаемый результат:**

- Все команды работают корректно
- Ответы содержат актуальную информацию
- Форматирование читаемое

**Примечание:** Требует настройки `TELEGRAM_BOT_TOKEN` и запущенного бота.

---

### 3.12 Activity Feed

#### TC-ACT-001: Просмотр ленты активности

**Шаги:**

1. Откройте workspace
2. Найдите раздел "Activity Feed" (если есть UI)
3. Или используйте API `/api/activities?workspaceId=[id]`

**Ожидаемый результат:**

- Отображаются последние активности
- Видны: тип активности, описание, пользователь, время
- Активности отсортированы по дате (новые первые)

**API пример:**

```bash
curl http://localhost:3000/api/activities?workspaceId=[workspaceId]
```

#### TC-ACT-002: Проверка создания активности

**Шаги:**

1. Выполните действия (создание цели, изменение статуса, добавление участника)
2. Проверьте Activity Feed

**Ожидаемый результат:**

- Для каждого действия создана запись в Activity Feed
- Тип и описание соответствуют действию
- Метаданные сохранены корректно

---

## 4. Тестирование безопасности

### TC-SEC-001: Доступ к чужим данным

**Шаги:**

1. Войдите как User A
2. Запомните ID workspace или goal
3. Выйдите из системы
4. Войдите как User B
5. Попробуйте получить доступ к workspace/goal User A через API

**Ожидаемый результат:**

- Доступ запрещен (403 Forbidden)
- Данные User A недоступны User B

**API пример:**

```bash
# Войдите как User B, попробуйте получить goal User A
curl http://localhost:3000/api/goals/[goalIdFromUserA]
# Должен вернуть 403 или 404
```

### TC-SEC-002: RBAC проверка

**Шаги:**

1. Создайте workspace с участниками разных ролей
2. Войдите как MEMBER
3. Попробуйте:
   - Добавить участника (должно быть запрещено)
   - Удалить workspace (должно быть запрещено)
   - Изменить роль участника (должно быть запрещено)

**Ожидаемый результат:**

- Операции запрещены для ролей без прав
- Отображаются соответствующие сообщения об ошибке
- API возвращает 403 Forbidden

### TC-SEC-003: Валидация входных данных

**Шаги:**

1. Попробуйте создать цель с:
   - Пустым title
   - Неверным форматом даты
   - Отрицательным прогрессом
   - Прогрессом > 100%
   - SQL injection в title (например, `'; DROP TABLE Goal; --`)

**Ожидаемый результат:**

- Валидация отклоняет неверные данные
- Отображаются сообщения об ошибках
- Данные не сохраняются
- SQL injection не выполняется (Prisma защищает)

### TC-SEC-004: Rate Limiting

**Шаги:**

1. Выполните множество запросов к `/api/goals/search` быстро
2. Проверьте ограничение запросов

**Ожидаемый результат:**

- После превышения лимита возвращается 429 Too Many Requests
- Rate limiting работает корректно

**Примечание:** Rate limiting реализован только для search endpoint.

---

## 5. Тестирование производительности

### TC-PERF-001: Загрузка списка целей

**Шаги:**

1. Создайте 100+ целей в workspace
2. Откройте `/goals`
3. Проверьте время загрузки

**Ожидаемый результат:**

- Страница загружается за разумное время (< 2 секунд)
- Пагинация работает (если реализована)
- Нет визуальных задержек

**Инструменты:**

- Chrome DevTools → Network tab
- Performance tab для анализа рендеринга

### TC-PERF-002: Поиск с большим количеством данных

**Шаги:**

1. Создайте много целей
2. Выполните поиск
3. Проверьте время ответа

**Ожидаемый результат:**

- Поиск работает быстро
- Debounce предотвращает излишние запросы
- Результаты отображаются корректно

### TC-PERF-003: Иерархия с глубокой вложенностью

**Шаги:**

1. Создайте иерархию целей с глубиной 5+ уровней
2. Откройте вкладку "Иерархия"
3. Проверьте время загрузки и отображения

**Ожидаемый результат:**

- Иерархия загружается за разумное время
- Рекурсивные запросы оптимизированы
- UI отзывчивый

---

## 6. Тестирование UI/UX

### TC-UI-001: Responsive дизайн

**Шаги:**

1. Откройте приложение на разных размерах экрана:
   - Mobile (375px)
   - Tablet (768px)
   - Desktop (1920px)
2. Проверьте адаптивность всех страниц

**Ожидаемый результат:**

- Все элементы адаптируются под размер экрана
- Навигация работает на мобильных устройствах
- Формы удобны для заполнения на всех устройствах

### TC-UI-002: Loading states

**Шаги:**

1. Откройте страницы с данными
2. Проверьте отображение skeleton loaders
3. Проверьте индикаторы загрузки

**Ожидаемый результат:**

- Skeleton loaders отображаются во время загрузки
- Пользователь понимает, что данные загружаются
- Нет "белых экранов"

### TC-UI-003: Error handling

**Шаги:**

1. Отключите интернет
2. Попробуйте выполнить действия
3. Проверьте отображение ошибок

**Ожидаемый результат:**

- Отображаются понятные сообщения об ошибках
- Пользователь может повторить действие
- Нет технических сообщений об ошибках

### TC-UI-004: Accessibility

**Шаги:**

1. Используйте клавиатуру для навигации
2. Проверьте работу с screen reader (если доступен)
3. Проверьте контрастность цветов

**Ожидаемый результат:**

- Все элементы доступны с клавиатуры
- Focus indicators видны
- Контрастность соответствует WCAG стандартам

---

## 7. Чек-лист для быстрой проверки

### Критичные функции (обязательно проверить перед релизом)

- [ ] Регистрация и вход работают
- [ ] Создание workspace работает
- [ ] Создание цели работает
- [ ] Редактирование цели работает
- [ ] Удаление цели работает
- [ ] Иерархия целей отображается корректно
- [ ] Progress roll-up работает автоматически
- [ ] Поиск целей работает
- [ ] Аналитика отображается
- [ ] Team metrics отображаются
- [ ] RBAC работает корректно
- [ ] Доступ к чужим данным запрещен

### Важные функции

- [ ] Метрики создаются и обновляются
- [ ] Шаблоны целей работают
- [ ] Массовые операции работают (через API)
- [ ] Custom reports генерируются
- [ ] Activity feed отображается (через API)
- [ ] Workspace invites работают
- [ ] Уведомления отправляются (если настроены сервисы)

### Дополнительные функции

- [ ] Telegram интеграция работает
- [ ] Email уведомления отправляются
- [ ] Настройки уведомлений сохраняются

---

## 8. Известные ограничения и особенности

1. **Email уведомления**: Требуют настройки `RESEND_API_KEY`
2. **Telegram бот**: Требует настройки `TELEGRAM_BOT_TOKEN`
3. **Экспорт в PDF/Excel**: Не реализован (отложен на будущее)
4. **Rate limiting**: Частично реализован (только в search endpoint)
5. **Sentry**: Структура готова, но требует установки пакета
6. **Activity Feed UI**: Может быть не реализован, используйте API
7. **Bulk Operations UI**: Может быть не реализован, используйте API
8. **Goal Templates UI**: Может быть не реализован, используйте API

---

## 9. Рекомендации по тестированию

1. **Начните с базовой функциональности**: Auth → Workspace → Goals
2. **Тестируйте в логическом порядке**: Создание → Использование → Удаление
3. **Используйте разные роли**: Проверяйте RBAC с разных аккаунтов
4. **Проверяйте граничные случаи**: Пустые значения, максимальные значения, несуществующие ID
5. **Тестируйте на разных браузерах**: Chrome, Firefox, Safari, Edge
6. **Проверяйте мобильную версию**: Responsive design
7. **Используйте DevTools**: Network tab для проверки API запросов, Console для ошибок
8. **Тестируйте с реальными данными**: Создайте реалистичные сценарии использования

---

## 10. Отчетность о багах

При обнаружении багов фиксируйте:

### Обязательная информация:

- **Название бага**: Краткое описание проблемы
- **Приоритет**: Critical / High / Medium / Low
- **Шаги воспроизведения**: Детальное описание действий (пронумерованный список)
- **Ожидаемый результат**: Что должно было произойти
- **Фактический результат**: Что произошло на самом деле
- **Скриншоты**: Если применимо (особенно для UI багов)
- **Консоль браузера**: Ошибки JavaScript (F12 → Console)
- **Network tab**: Ошибки API запросов (F12 → Network)
- **Окружение**:
  - Браузер и версия
  - ОС
  - Разрешение экрана
  - Версия Node.js (если релевантно)

### Дополнительная информация:

- **Частота**: Всегда / Иногда / Один раз
- **Workaround**: Есть ли обходной путь
- **Связанные тест-кейсы**: Какие TC затронуты

### Пример отчета о баге:

```
**Название:** Нельзя создать подцель для WEEKLY цели

**Приоритет:** Medium

**Шаги воспроизведения:**
1. Создайте цель типа WEEKLY
2. Откройте цель
3. Попробуйте создать подцель

**Ожидаемый результат:**
- Должна отображаться ошибка валидации
- Операция отклонена

**Фактический результат:**
- Подцель создается, но затем возникает ошибка при сохранении
- Непонятное сообщение об ошибке

**Скриншот:** [приложить]

**Консоль браузера:**
```

Error: Cannot set goal as child of WEEKLY goal

```

**Окружение:**
- Chrome 120.0.6099.109
- Windows 11
- 1920x1080
```

---

## 11. Автоматизация тестирования

### Расширение E2E тестов

Рекомендуется добавить E2E тесты для:

- Создания workspace
- Добавления участников
- Создания иерархии целей
- Массовых операций
- Генерации отчетов
- Принятия workspace invites

### CI/CD интеграция

Настроить автоматический запуск тестов при:

- Push в main ветку
- Pull Request
- Перед деплоем

**Пример GitHub Actions workflow:**

```yaml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install
      - run: npm run test:run
      - run: npm run test:e2e
```

---

## 12. Регрессионное тестирование

После каждого релиза проверяйте:

### Критичные сценарии:

1. Регистрация → Создание workspace → Создание цели → Изменение статуса → Завершение
2. Создание иерархии целей → Обновление прогресса → Проверка roll-up
3. Приглашение участника → Принятие приглашения → Проверка доступа

### Быстрая проверка (Smoke Test):

- [ ] Вход в систему работает
- [ ] Dashboard загружается
- [ ] Можно создать цель
- [ ] Можно просмотреть цель
- [ ] Поиск работает

---

## 13. Тестирование интеграций

### TC-INT-001: Email интеграция (Resend)

**Шаги:**

1. Настройте `RESEND_API_KEY` в `.env`
2. Создайте workspace invite
3. Проверьте получение email

**Ожидаемый результат:**

- Email отправлен успешно
- Содержит корректную информацию
- Ссылка работает

### TC-INT-002: Telegram интеграция

**Шаги:**

1. Настройте `TELEGRAM_BOT_TOKEN`
2. Привяжите Telegram аккаунт
3. Выполните действия, которые должны отправлять уведомления
4. Проверьте получение сообщений в Telegram

**Ожидаемый результат:**

- Уведомления приходят в Telegram
- Форматирование корректное
- Команды бота работают

---

## 14. Тестирование миграций БД

### TC-DB-001: Применение миграций

**Шаги:**

1. Создайте новую БД
2. Выполните `npx prisma migrate dev`
3. Проверьте структуру БД

**Ожидаемый результат:**

- Все таблицы созданы
- Индексы созданы
- Связи установлены корректно

### TC-DB-002: Seed данные

**Шаги:**

1. Выполните `npm run db:seed`
2. Проверьте созданные данные

**Ожидаемый результат:**

- Тестовые данные созданы
- Можно использовать для тестирования
- Нет дубликатов или ошибок

---

## 15. Заключение

Этот план покрывает основную функциональность проекта GoalFlow. Приоритизируйте тестирование критичных функций перед релизом. Регулярно обновляйте план по мере добавления новых функций.

### Приоритеты тестирования:

1. **Высокий приоритет** (перед каждым релизом):
   - Аутентификация
   - CRUD операции с целями
   - RBAC
   - Безопасность доступа к данным

2. **Средний приоритет** (перед major релизами):
   - Иерархия целей
   - Аналитика
   - Уведомления
   - Workspace management

3. **Низкий приоритет** (периодически):
   - Производительность
   - UI/UX детали
   - Интеграции (если не критичны)

---

**Дата создания:** 2025-12-08  
**Версия:** 1.0  
**Статус:** Активный
